<div class="admin-container">
  <header class="admin-header">
    <h1>Gestione Portfolio</h1>
    <button mat-flat-button color="primary">Aggiungi Nuovo Album</button>
  </header>

  <ng-container *ngIf="portfolioItems$ | async as items; else loading">
    <div class="table-container" *ngIf="items.length > 0; else noItems">
      <table mat-table [dataSource]="items" class="mat-elevation-z8">

        <ng-container matColumnDef="title">
          <th mat-header-cell *matHeaderCellDef> Titolo </th>
          <td mat-cell *matCellDef="let item"> {{item.title}} </td>
        </ng-container>

        <ng-container matColumnDef="category">
          <th mat-header-cell *matHeaderCellDef> Categoria </th>
          <td mat-cell *matCellDef="let item"> {{item.category}} </td>
        </ng-container>

        <ng-container matColumnDef="actions">
          <th mat-header-cell *matHeaderCellDef> Azioni </th>
          <td mat-cell *matCellDef="let item">
            <button mat-icon-button color="primary" aria-label="Modifica elemento">
              <mat-icon>edit</mat-icon>
            </button>
            <button mat-icon-button color="warn" aria-label="Elimina elemento" (click)="deleteItem(item._id)">
              <mat-icon>delete</mat-icon>
            </button>
          </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="['title', 'category', 'actions']"></tr>
        <tr mat-row *matRowDef="let row; columns: ['title', 'category', 'actions'];"></tr>
      </table>
    </div>

    <ng-template #noItems>
      <p class="empty-state">Nessun album trovato. Inizia aggiungendone uno nuovo!</p>
    </ng-template>
  </ng-container>

  <ng-template #loading>
    <div class="loading-state">
      <mat-spinner [diameter]="50"></mat-spinner>
      <p>Caricamento album...</p>
    </div>
  </ng-template>
</div>