<!-- src/app/pages/contatti/contatti.component.html -->
<div class="contatti-page">
  <section class="contatti-container">
    <div class="header-section">
      <h1 class="page-title">
        <mat-icon class="title-icon">brush</mat-icon>
        <span i18n="@@contattiTitle">Contatti</span>
      </h1>
      <p class="page-subtitle" i18n="@@contattiSubtitle">
        Compila il modulo sottostante o contattami direttamente per qualsiasi domanda o per prenotare una consulenza.
      </p>
    </div>

    <div class="content-grid">
      <!-- Colonna Sinistra: Form -->
      <div class="form-wrapper">
        <form [formGroup]="contactForm" (ngSubmit)="onSubmit()" class="contact-form">
          <mat-form-field appearance="outline">
            <mat-label i18n="@@contattiFormNameLabel">Nome</mat-label>
            <input matInput i18n-placeholder="@@contattiFormNamePlaceholder" placeholder="Il tuo nome" formControlName="nome" />
            <mat-error *ngIf="contactForm.get('nome')?.invalid && contactForm.get('nome')?.touched" i18n="@@contattiFormNameError">
              Il nome è obbligatorio e deve avere almeno 2 caratteri.
            </mat-error>
          </mat-form-field>

          <mat-form-field appearance="outline">
            <mat-label i18n="@@contattiFormEmailLabel">Email</mat-label>
            <input matInput type="email" i18n-placeholder="@@contattiFormEmailPlaceholder" placeholder="La tua email" formControlName="email" />
            <mat-error *ngIf="contactForm.get('email')?.invalid && contactForm.get('email')?.touched" i18n="@@contattiFormEmailError">
              Inserisci un'email valida.
            </mat-error>
          </mat-form-field>

          <mat-form-field appearance="outline">
            <mat-label i18n="@@contattiFormPhoneLabel">Cellulare (opzionale)</mat-label>
            <input matInput type="tel" i18n-placeholder="@@contattiFormPhonePlaceholder" placeholder="Il tuo numero di cellulare" formControlName="cellulare" />
            <mat-error *ngIf="contactForm.get('cellulare')?.invalid && contactForm.get('cellulare')?.touched" i18n="@@contattiFormPhoneError">
              Inserisci un numero di cellulare valido.
            </mat-error>
          </mat-form-field>

          <mat-form-field appearance="outline">
            <mat-label i18n="@@contattiFormMessageLabel">Messaggio</mat-label>
            <textarea matInput rows="5" i18n-placeholder="@@contattiFormMessagePlaceholder" placeholder="Scrivi qui il tuo messaggio..." formControlName="messaggio"></textarea>
            <mat-error *ngIf="contactForm.get('messaggio')?.invalid && contactForm.get('messaggio')?.touched" i18n="@@contattiFormMessageError">
              Il messaggio è obbligatorio e deve avere almeno 10 caratteri.
            </mat-error>
          </mat-form-field>

          <div *ngIf="successMessage" class="success-message">
            <mat-icon>check_circle_outline</mat-icon> <span i18n="@@contattiFormSuccessMessage">Messaggio inviato con successo!</span>
          </div>
          <div *ngIf="errorMessage" class="error-message-ui">
            <mat-icon>error_outline</mat-icon> <span i18n="@@contattiFormErrorMessage">Errore durante l'invio del messaggio. Riprova.</span>
          </div>

          <button mat-raised-button color="primary" type="submit" [disabled]="contactForm.invalid || isLoading">
            <div *ngIf="isLoading" class="button-loading-content">
              <mat-spinner diameter="20"></mat-spinner>
              <span i18n="@@contattiFormButtonSending">Invio...</span>
            </div>
            <ng-container *ngIf="!isLoading">
              <span i18n="@@contattiFormButtonSend">Invia Messaggio</span>
            </ng-container>
          </button>
        </form>
      </div>

      <!-- Colonna Destra: Info Dirette -->
      <div class="info-wrapper">
        <div class="direct-contact-info">
          <h2 i18n="@@contattiDirectContactHeading">Contattami Direttamente</h2>
          <div class="contact-methods">
            <a href="tel:+393469604243" class="contact-method-item">
              <mat-icon>phone</mat-icon>
              <div class="contact-text">
                <span class="contact-title" i18n="@@contattiDirectContactPhone">Telefono</span>
                <span class="contact-detail">+39 346 960 4243</span>
              </div>
            </a>
            <a href="mailto:azzurraangius95@gmail.com" class="contact-method-item">
              <mat-icon>email</mat-icon>
              <div class="contact-text">
                <span class="contact-title" i18n="@@contattiDirectContactEmail">Email</span>
                <span class="contact-detail">azzurraangius95&#64;gmail.com</span>
              </div>
            </a>
            <a href="https://wa.me/393469604243" target="_blank" class="contact-method-item">
              <!-- NUOVA ICONA WHATSAPP (SVG) -->
              <svg class="whatsapp-icon" viewBox="0 0 24 24" fill="currentColor">
                <path d="M16.75 13.96c.25.42.45.83.25 1.25-.21.42-.84.73-1.47.84-.52.09-1.25.21-1.98-.21-.83-.52-2.19-1.35-3.33-2.5s-1.88-2.5-2.39-3.33c-.42-.73-.21-1.46-.12-1.98.09-.63.42-1.26.84-1.47.42-.21.83-.01 1.25.25.42.25.73.84.84 1.47.09.52-.12 1.15-.21 1.35-.09.21-.21.32-.42.53s-.32.42-.21.63c.21.42.84 1.25 1.88 2.3s1.88 1.67 2.29 1.88c.21.1.42.09.63-.12.21-.21.32-.32.53-.42.21-.09 1.04-.21 1.47-.12.52.09.94.32 1.25.73zM12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"/>
              </svg>
              <div class="contact-text">
                <span class="contact-title" i18n="@@contattiDirectContactWhatsapp">WhatsApp</span>
                <span class="contact-detail">Scrivimi un messaggio</span>
              </div>
            </a>
          </div>
        </div>
      </div>
    </div>
  </section>
</div>